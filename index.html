<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Debapriya Arts</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage-compat.js"></script>

<style>
body{
margin:0;
font-family:'Montserrat', sans-serif;
background:linear-gradient(-45deg,#f5e6d3,#efe0c8,#f8ecdd,#e9d5b9);
background-size:400% 400%;
animation:bgMove 15s ease infinite;
color:#3e2f1c;
}

@keyframes bgMove{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}

header{
text-align:center;
padding:40px;
position:relative;
}

header h1{
font-family:'Cormorant Garamond', serif;
font-size:60px;
margin:0;
}

.burger{
position:absolute;
right:20px;
top:20px;
font-size:30px;
cursor:pointer;
}

#adminPanel{
position:fixed;
top:0;
right:-350px;
width:320px;
height:100%;
background:white;
box-shadow:-5px 0 20px rgba(0,0,0,0.2);
padding:20px;
transition:0.4s;
overflow:auto;
z-index:1000;
}

#adminPanel.active{ right:0; }

input,select,button{
width:100%;
margin-bottom:10px;
padding:8px;
}

.album-container{
display:flex;
flex-wrap:wrap;
justify-content:center;
gap:30px;
padding:40px;
}

.album-card{
width:240px;
height:240px;
background:#fff;
display:flex;
align-items:center;
justify-content:center;
cursor:pointer;
border-radius:20px;
box-shadow:0 10px 20px rgba(0,0,0,0.1);
font-weight:bold;
font-size:18px;
transition:0.3s;
}

.album-card:hover{
transform:scale(1.05);
}

#gallerySection{
display:none;
padding:40px;
text-align:center;
}

#gallery{
display:flex;
flex-wrap:wrap;
gap:20px;
justify-content:center;
}

#gallery img{
width:250px;
height:250px;
object-fit:cover;
border-radius:15px;
}

.deleteBtn{
background:#3e2f1c;
color:white;
border:none;
padding:5px;
margin-top:5px;
cursor:pointer;
}

.toggleBtn{
margin:20px auto;
display:block;
padding:10px;
background:#3e2f1c;
color:white;
border:none;
cursor:pointer;
}
</style>
</head>

<body>

<header>
<h1>Debapriya Arts</h1>
<div class="burger" onclick="toggleAdmin()">â˜°</div>
</header>

<!-- ADMIN PANEL -->
<div id="adminPanel">
<h3>Admin Login</h3>
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">
<button onclick="login()">Login</button>
<button onclick="logout()">Logout</button>

<hr>

<h3>Upload Image</h3>
<select id="albumSelect">
<option value="phone">Phone Case</option>
<option value="bottle">Bottle Art</option>
<option value="sketch">Sketches</option>
<option value="drawing">Drawings</option>
<option value="calligraphy">Calligraphy</option>
</select>
<input type="file" id="imageUpload">
<button onclick="uploadImage()">Upload</button>
</div>

<!-- HOME -->
<div class="album-container" id="home">
<div class="album-card" onclick="openAlbum('phone')">Phone Case</div>
<div class="album-card" onclick="openAlbum('bottle')">Bottle Art</div>
<div class="album-card" onclick="openAlbum('sketch')">Sketches</div>
<div class="album-card" onclick="openAlbum('drawing')">Drawings</div>
<div class="album-card" onclick="openAlbum('calligraphy')">Calligraphy</div>
</div>

<!-- GALLERY -->
<div id="gallerySection">
<h2 id="albumTitle"></h2>
<button class="toggleBtn" onclick="toggleView()">Toggle Grid / Slideshow</button>
<div id="gallery"></div>
<button onclick="goHome()">Back</button>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAW-xmNGlY6Tdv91Eoa0iWTzdcpT2_rE0Y",
  authDomain: "debapriya-arts.firebaseapp.com",
  projectId: "debapriya-arts",
  storageBucket: "debapriya-arts.firebasestorage.app",
  messagingSenderId: "11795860412",
  appId: "1:11795860412:web:73df8d337c14e8a5bbb9b9"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

let currentAlbum="";
let isGrid=true;
let slideshowInterval;
let isAdmin=false;

/* AUTH STATE */
auth.onAuthStateChanged(user=>{
if(user){
isAdmin=true;
}else{
isAdmin=false;
}
});

/* LOGIN */
function login(){
const email=document.getElementById("email").value;
const password=document.getElementById("password").value;
auth.signInWithEmailAndPassword(email,password)
.then(()=>alert("Admin Logged In"))
.catch(err=>alert(err.message));
}

function logout(){
auth.signOut();
alert("Logged Out");
}

function toggleAdmin(){
document.getElementById("adminPanel").classList.toggle("active");
}

/* UPLOAD */
function uploadImage(){
const file=document.getElementById("imageUpload").files[0];
const album=document.getElementById("albumSelect").value;
if(!file) return alert("Select image first");

const storageRef=storage.ref(album+"/"+Date.now()+"_"+file.name);

storageRef.put(file).then(snapshot=>{
snapshot.ref.getDownloadURL().then(url=>{
db.collection("albums").add({
album:album,
url:url,
created:firebase.firestore.FieldValue.serverTimestamp()
});
alert("Uploaded Successfully!");
});
});
}

/* OPEN ALBUM */
function openAlbum(name){
currentAlbum=name;
document.getElementById("home").style.display="none";
document.getElementById("gallerySection").style.display="block";
document.getElementById("albumTitle").innerText=name.toUpperCase();
loadImages();
}

function goHome(){
clearInterval(slideshowInterval);
document.getElementById("gallerySection").style.display="none";
document.getElementById("home").style.display="flex";
}

/* LOAD IMAGES */
function loadImages(){
db.collection("albums").where("album","==",currentAlbum)
.onSnapshot(snapshot=>{
const gallery=document.getElementById("gallery");
gallery.innerHTML="";
snapshot.forEach(doc=>{
const data=doc.data();
const div=document.createElement("div");

let deleteButton="";
if(isAdmin){
deleteButton=`<button class="deleteBtn" onclick="deleteImage('${doc.id}','${data.url}')">Delete</button>`;
}

div.innerHTML=`
<img src="${data.url}">
${deleteButton}
`;

gallery.appendChild(div);
});
});
}

/* DELETE */
function deleteImage(id,url){
db.collection("albums").doc(id).delete();
storage.refFromURL(url).delete();
}

/* GRID / SLIDESHOW */
function toggleView(){
const images=document.querySelectorAll("#gallery img");
if(images.length===0) return;

if(isGrid){
let i=0;
images.forEach(img=>img.style.display="none");
images[0].style.display="block";
slideshowInterval=setInterval(()=>{
images.forEach(img=>img.style.display="none");
images[i].style.display="block";
i=(i+1)%images.length;
},2000);
}else{
clearInterval(slideshowInterval);
images.forEach(img=>img.style.display="block");
}
isGrid=!isGrid;
}
</script>

</body>
</html>
