<script>

const username="priyacrafts";
const repo="debapriya-arts";
const branch="main";

/* THEME */
document.getElementById("themeToggle").onclick=()=>{
document.body.classList.toggle("dark");
};

/* MUSIC */
const music=document.getElementById("bgMusic");
const musicBtn=document.getElementById("musicToggle");

window.addEventListener("load",()=>{
music.volume=0.5;
music.play().then(()=>{
musicBtn.innerText="â¸";
}).catch(()=>{
document.body.addEventListener("click",()=>{
music.play();
musicBtn.innerText="â¸";
},{once:true});
});
});

musicBtn.onclick=()=>{
if(music.paused){
music.play();
musicBtn.innerText="â¸";
}else{
music.pause();
musicBtn.innerText="ðŸŽµ";
}
};

/* ALBUM SYSTEM (CORRECT GITHUB LOADER) */
async function openAlbum(folder){

document.getElementById("albumView").style.display="flex";
document.getElementById("albumTitle").innerText=folder.toUpperCase();

let grid=document.getElementById("albumGrid");
grid.innerHTML="Loading...";

try{

let res=await fetch(`https://api.github.com/repos/${username}/${repo}/contents/images/${folder}?ref=${branch}`);
let data=await res.json();

grid.innerHTML="";

data.forEach(file=>{

if(file.type==="file" &&
(file.name.endsWith(".jpg") ||
 file.name.endsWith(".jpeg") ||
 file.name.endsWith(".png") ||
 file.name.endsWith(".webp"))){

let img=document.createElement("img");
img.src=file.download_url;
img.onclick=()=>openViewer(file.download_url);
grid.appendChild(img);

}

});

if(grid.innerHTML===""){
grid.innerHTML="No images found.";
}

}catch(error){
grid.innerHTML="Error loading images.";
}

}

function closeAlbum(){
document.getElementById("albumView").style.display="none";
}

function openViewer(src){
viewer.style.display="flex";
viewerImg.src=src;
}

function closeViewer(){
viewer.style.display="none";
}

</script>
